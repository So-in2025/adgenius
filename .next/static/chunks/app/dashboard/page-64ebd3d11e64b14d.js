(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3087:function(e,s,t){Promise.resolve().then(t.bind(t,227))},227:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Dashboard}});var a=t(7437),r=t(2265),l=t(4033),i=t(8153),n=t(4086),o=t(5050);function Dashboard(){let[e,s]=(0,r.useState)(null),[t,c]=(0,r.useState)([]),[d,u]=(0,r.useState)({title:"",prompt:"",style:"professional",duration:"30"}),[x,m]=(0,r.useState)(!1),[p,b]=(0,r.useState)("create"),h=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=(0,i.Aj)(o.I8,async e=>{if(e){let t=await (0,n.QT)((0,n.JU)(o.db,"users",e.uid));t.exists()?s({uid:e.uid,...t.data()}):h.push("/login")}else h.push("/login")}),t=localStorage.getItem("projects");return t&&c(JSON.parse(t)),()=>e()},[h]);let generateScript=async()=>{if(!e||e.credits<=0){alert("No tienes cr\xe9ditos disponibles. Reg\xedstrate para obtener 3 cr\xe9ditos gratis.");return}if(!d.prompt.trim()){alert("Por favor, describe tu anuncio primero.");return}m(!0);try{let a=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),r=await a.json();if(r.success){let a={id:Date.now().toString(),title:d.title||"Proyecto ".concat(t.length+1),prompt:d.prompt,script:r.script,videoUrl:r.videoUrl,thumbnail:r.thumbnail,style:d.style,duration:d.duration,createdAt:new Date().toISOString(),status:"completed"},l=[a,...t];c(l),localStorage.setItem("projects",JSON.stringify(l)),o.I8.currentUser&&(await (0,n.r7)((0,n.JU)(o.db,"users",o.I8.currentUser.uid),{credits:e.credits-1}),s({...e,credits:e.credits-1})),u({title:"",prompt:"",style:"professional",duration:"30"}),alert('\xa1Guion generado exitosamente! Revisa la pesta\xf1a "Mis Proyectos".')}}catch(e){console.error("Error:",e),alert("Error al generar el guion. Intenta nuevamente.")}m(!1)},handleLogout=async()=>{try{await (0,i.w7)(o.I8),localStorage.removeItem("projects"),h.push("/")}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}};return e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-xl font-bold",children:["Hola, ",e.name," \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Crea anuncios incre\xedbles con IA"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[e.credits," cr\xe9ditos restantes"]}),(0,a.jsx)("button",{onClick:handleLogout,className:"text-gray-600 hover:text-gray-900 text-sm",children:"Cerrar sesi\xf3n"})]})]})})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"tabs flex space-x-4 mb-8",children:[(0,a.jsx)("button",{className:"tab ".concat("create"===p?"tab-active":""),onClick:()=>b("create"),children:"\uD83C\uDFAC Crear Nuevo"}),(0,a.jsxs)("button",{className:"tab ".concat("projects"===p?"tab-active":""),onClick:()=>b("projects"),children:["\uD83D\uDCC1 Mis Proyectos (",t.length,")"]})]}),"create"===p&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Generar Nuevo Anuncio"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"T\xedtulo del proyecto"}),(0,a.jsx)("input",{type:"text",placeholder:"Ej: Anuncio Restaurant Italiano",value:d.title,onChange:e=>u({...d,title:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Estilo del video"}),(0,a.jsxs)("select",{value:d.style,onChange:e=>u({...d,style:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg",children:[(0,a.jsx)("option",{value:"professional",children:"\uD83C\uDFAF Profesional"}),(0,a.jsx)("option",{value:"casual",children:"\uD83D\uDE0A Casual"}),(0,a.jsx)("option",{value:"emotional",children:"❤️ Emocional"}),(0,a.jsx)("option",{value:"modern",children:"\uD83D\uDE80 Moderno"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Descripci\xf3n del anuncio *"}),(0,a.jsx)("textarea",{placeholder:"Describe tu producto o servicio... Ej: 'Anuncio para redes sociales de un restaurante italiano elegante'",value:d.prompt,onChange:e=>u({...d,prompt:e.target.value}),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Duraci\xf3n (segundos)"}),(0,a.jsx)("input",{type:"number",value:d.duration,onChange:e=>u({...d,duration:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg",min:"15",max:"60"})]})]}),(0,a.jsx)("button",{onClick:generateScript,disabled:x||e.credits<=0||!d.prompt.trim(),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Generando...":"✨ Generar Guion (".concat(e.credits," cr\xe9ditos)")}),0===e.credits&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-yellow-100 border border-yellow-400 rounded-lg",children:(0,a.jsx)("p",{className:"text-yellow-800",children:"\xa1No tienes cr\xe9ditos disponibles! Actualiza tu plan."})})]}),"projects"===p&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Mis Proyectos"}),(0,a.jsxs)("span",{className:"text-gray-600",children:[t.length," proyectos"]})]}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC1"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No hay proyectos a\xfan"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Crea tu primer anuncio para verlo aqu\xed"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative h-48 bg-gray-200",children:[(0,a.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:(0,a.jsx)("button",{onClick:()=>window.open(e.videoUrl,"_blank"),className:"bg-white text-gray-800 px-4 py-2 rounded-lg font-semibold",children:"▶️ Ver Video"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:e.style})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:new Date(e.createdAt).toLocaleDateString("es-ES")}),(0,a.jsxs)("p",{className:"text-gray-700 text-sm mb-4 line-clamp-3",children:[e.script.substring(0,100),"..."]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded text-sm",children:"\uD83D\uDCCB Copiar Guion"}),(0,a.jsx)("button",{className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded text-sm",children:"\uD83C\uDFAC Renderizar"})]})]})]},e.id))})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando dashboard..."})]})})}},5050:function(e,s,t){"use strict";t.d(s,{I8:function(){return o},db:function(){return c}});var a=t(994),r=t(8153),l=t(4086),i=t(9584);let n=null,o=null,c=null;try{n=(0,a.ZF)({apiKey:"AIzaSyCTWZrM0XqJkKJt3c1NRxiFYK5i11wWLIw",authDomain:"adgenius-b3e63.firebaseapp.com",projectId:"adgenius-b3e63",storageBucket:"adgenius-b3e63.firebasestorage.app",messagingSenderId:"42751979896",appId:"1:42751979896:web:a8f666604334b28fa1988d"}),o=(0,r.v0)(n),c=(0,l.ad)(n),(0,i.cF)(n)}catch(e){console.error("Firebase initialization error:",e)}}},function(e){e.O(0,[358,315,515,971,472,744],function(){return e(e.s=3087)}),_N_E=e.O()}]);